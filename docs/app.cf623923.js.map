{"version":3,"sources":["app.ts"],"names":[],"mappings":";AAMA,SAAS,IACA,OAAA,OAAO,WAAW,MAE3B,SAAS,IACA,OAAA,OAAO,WAAW,KAG3B,SAAS,IACF,IAAA,EAAY,IAAI,gBAAgB,OAAO,SAAS,QACnD,OAAA,EAAU,IAAI,SACT,EAAU,IAAI,SAEd,OAAO,WAAW,aAG3B,SAAS,IAEA,OADP,OAAO,WAAW,MAAQ,IACnB,IAET,SAAS,IACA,OAAA,SAAS,eAAe,gBAAgB,MAEjD,SAAS,IAEA,OADP,OAAO,WAAW,MAAQ,IACnB,IAET,SAAS,IACF,IAAA,EAAY,IAAI,gBAAgB,OAAO,SAAS,QACnD,GAAA,EAAU,IAAI,QAAS,CACnB,IAAA,EAAO,EAAU,IAAI,QACpB,OAAA,KAAK,KAAK,SAAS,IAEnB,OAAA,OAAO,WAAW,YAG3B,SAAS,IAEA,OADP,OAAO,WAAW,KAAO,IAClB,IAGT,SAAS,IACD,IAAA,EAAiB,IAEvB,EADa,IACY,GAG3B,SAAS,IAED,OADW,IAAI,gBAAgB,OAAO,SAAS,QACrC,IAAI,mBAEtB,SAAS,IACL,GAAA,UAAU,UAAW,CACjB,IACA,EADS,SAAS,eAAe,UACP,YAChC,UAAU,UAAU,UAAU,IAIhC,SAAS,EAAkB,GACnB,IAAA,EAAQ,IACd,EAAmB,IAAW,GAEhC,SAAS,EAAsB,GACvB,IAAA,EAAc,SAAS,eAAe,gBAC5C,EAAY,MAAQ,EACpB,EAAY,iBAAiB,QAAS,GACtC,SAAS,eAAe,iBAAiB,iBAAiB,QAAS,WAAa,SAAS,eAAe,gBAAgB,UAG1H,SAAS,EAAoB,EAAO,GAClC,SAAS,eAAe,iBAAiB,UAAY,EACrD,SAAS,eAAe,gBAAgB,UAAY,EAGtD,SAAS,EAAmB,EAAM,GAC3B,IAAA,EAAS,SAAS,eAAe,UAInC,GAHH,EAAQ,EAAM,WAAW,KAAO,EAAQ,IAAM,EAC/C,EAAO,MAAQ,EACf,EAAO,OAAS,EACZ,EAAO,WAAY,CACd,IAAA,EAAM,EAAO,WAAW,KAAM,CAAE,OAAO,IAC/C,EAAI,UAAY,EAChB,EAAI,SAAS,EAAG,EAAG,EAAM,GACvB,EAAoB,EAAO,GAC3B,EAAsB,GACxB,SAAS,eAAe,uBAAuB,MAAM,gBAAkB,EACvE,SAAS,eAAe,yBAAyB,MAAM,gBAAkB,EACnE,IAAA,EAAU,EAAO,YACJ,SAAS,eAAe,WAChC,MAAQ,EAChB,KACF,KAIH,SAAS,EAAmB,GACrB,IACA,EADS,SAAS,eAAe,UAClB,UAAU,aACzB,EAAW,cAAc,OAAO,IAAY,IAAK,IAAU,WAAY,QAC7E,EAAG,SAAW,EACd,EAAG,KAAO,EA1GX,OAAO,WAAa,CAClB,aAAc,SACd,YAAc,MACd,MAAO,KACP,KAAM,MAwGR,SAAS,iBAAiB,mBAAoB","file":"app.cf623923.js","sourceRoot":"../src","sourcesContent":["window.tinySquare = {\n  defaultColor: \"FF6F61\",\n  defaultSize : \"200\",\n  color: null,\n  size: null,\n};\nfunction getColor() : string {\n  return window.tinySquare.color;\n}\nfunction getSize() : string {\n  return window.tinySquare.size;\n}\n\nfunction getColorFromParam() : string {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\tif(urlParams.has('color')) {\n\t\treturn urlParams.get('color');\n\t}else{\n\t\treturn window.tinySquare.defaultColor;\n\t}\n}\nfunction setColorFromParam() : string {\n  window.tinySquare.color = getColorFromParam();\n  return getColor();\n}\nfunction getColorFromPicker() : string {\n  return document.getElementById('color-picker').value;\n}\nfunction setColorFromPicker() : string {\n  window.tinySquare.color = getColorFromPicker();\n  return getColor();\n}\nfunction getSizeFromParam() : string {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\tif(urlParams.has('size')) {\n\t\tconst size = urlParams.get('size');\n\t\treturn Math.ceil(parseInt(size));\n\t}else{\n\t\treturn window.tinySquare.defaultSize;\n\t}\n}\nfunction setSizeFromParam() {\n  window.tinySquare.size = getSizeFromParam();\n  return getSize();\n}\n\nfunction onLoad() {\n  const color : string = setColorFromParam();\n  const size = setSizeFromParam();\n  handleSizeAndColor(size, color);\n}\n\nfunction shouldAutoCopyDataUrl() {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\treturn urlParams.has('autocopydataurl');\n}\nfunction copyDataURLToClipboard() {\n\tif(navigator.clipboard) {\n\t\tconst canvas = document.getElementById('canvas');\n\t\tconst dataURL : string = canvas.toDataURL();\n\t\tnavigator.clipboard.writeText(dataURL);\n\t}\n}\n\nfunction colorPickerChange(e) {\n  const color = setColorFromPicker();\n  handleSizeAndColor(getSize(), color);\n}\nfunction initializeColorPicker(color) {\n  const colorPicker = document.getElementById('color-picker');\n  colorPicker.value = color;\n  colorPicker.addEventListener(\"input\", colorPickerChange);\n  document.getElementById('color-display').addEventListener('click', function() { document.getElementById('color-picker').click(); });\n}\n\nfunction displayColorAndSize(color, size) {\n  document.getElementById('color-display').innerText = color;\n  document.getElementById('size-display').innerText = size;\n}\n\nfunction handleSizeAndColor(size, color) {\n\tconst canvas = document.getElementById('canvas');\n  color = color.startsWith(\"#\") ? color : \"#\" + color;\n\tcanvas.width = size;\n\tcanvas.height = size;\n\tif (canvas.getContext) {\n    const ctx = canvas.getContext('2d', { alpha: false });\n\t\tctx.fillStyle = color;\n\t\tctx.fillRect(0, 0, size, size);\n    displayColorAndSize(color, size);\n    initializeColorPicker(color);\n\t\tdocument.getElementById('dataurl-copy-button').style.backgroundColor = color;\n\t\tdocument.getElementById('download-image-button').style.backgroundColor = color;\n\t\tconst dataUrl = canvas.toDataURL();\n\t\tconst dataUrlTag = document.getElementById('dataurl');\n\t\tdataUrlTag.value = dataUrl;\n\t\tif(shouldAutoCopyDataUrl()){\n\t\t\tcopyDataURLToClipboard();\n\t\t}\n\t}\n}\nfunction downloadTinySquare(el) {\n\tconst canvas = document.getElementById('canvas');\n\tconst image = canvas.toDataURL(\"image/jpg\");\n\tconst filename = 'tinysquare-'.concat(getColor(), '-', getSize().toString(), '.png');\n\tel.download = filename;\n\tel.href = image;\n}\ndocument.addEventListener(\"DOMContentLoaded\", onLoad);\n"]}