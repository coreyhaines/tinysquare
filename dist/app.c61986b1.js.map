{"version":3,"sources":["app.ts"],"names":[],"mappings":"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","file":"app.c61986b1.js","sourceRoot":"../src","sourcesContent":["window.tinySquare = {\n  defaultColor: \"FF6F61\",\n  defaultSize : \"200\",\n  color: null,\n  size: null,\n};\nfunction getColor() : string {\n  return window.tinySquare.color;\n}\nfunction getSize() : string {\n  return window.tinySquare.size;\n}\n\nfunction getColorFromParam() : string {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\tif(urlParams.has('color')) {\n\t\treturn urlParams.get('color');\n\t}else{\n\t\treturn window.tinySquare.defaultColor;\n\t}\n}\nfunction setColorFromParam() : string {\n  window.tinySquare.color = getColorFromParam();\n  return getColor();\n}\nfunction getColorFromPicker() : string {\n  return document.getElementById('color-picker').value;\n}\nfunction setColorFromPicker() : string {\n  window.tinySquare.color = getColorFromPicker();\n  return getColor();\n}\nfunction getSizeFromParam() {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\tif(urlParams.has('size')) {\n\t\tconst size = urlParams.get('size');\n\t\treturn Math.ceil(parseInt(size));\n\t}else{\n\t\treturn window.tinySquare.defaultSize;\n\t}\n}\nfunction setSizeFromParam() {\n  window.tinySquare.size = getSizeFromParam();\n  return getSize();\n}\n\nfunction onLoad() {\n  const color : string = setColorFromParam();\n  const size = setSizeFromParam();\n  handleSizeAndColor(size, color);\n}\n\nfunction shouldAutoCopyDataUrl() {\n\tconst urlParams = new URLSearchParams(window.location.search);\n\treturn urlParams.has('autocopydataurl');\n}\nfunction copyDataURLToClipboard() {\n\tif(navigator.clipboard) {\n\t\tconst canvas = document.getElementById('canvas');\n\t\tconst dataURL : string = canvas.toDataURL();\n\t\tnavigator.clipboard.writeText(dataURL);\n\t}\n}\n\nfunction colorPickerChange(e) {\n  const color = setColorFromPicker();\n  handleSizeAndColor(getSize(), color);\n}\nfunction initializeColorPicker(color) {\n  const colorPicker = document.getElementById('color-picker');\n  colorPicker.value = color;\n  colorPicker.addEventListener(\"input\", colorPickerChange);\n  document.getElementById('color-display').addEventListener('click', function() { document.getElementById('color-picker').click(); });\n}\n\nfunction displayColorAndSize(color, size) {\n  document.getElementById('color-display').innerText = color;\n  document.getElementById('size-display').innerText = size;\n}\n\nfunction handleSizeAndColor(size, color) {\n\tconst canvas = document.getElementById('canvas');\n  color = color.startsWith(\"#\") ? color : \"#\" + color;\n\tcanvas.width = size;\n\tcanvas.height = size;\n\tif (canvas.getContext) {\n    const ctx = canvas.getContext('2d', { alpha: false });\n\t\tctx.fillStyle = color;\n\t\tctx.fillRect(0, 0, size, size);\n    displayColorAndSize(color, size);\n    initializeColorPicker(color);\n\t\tdocument.getElementById('dataurl-copy-button').style.backgroundColor = color;\n\t\tdocument.getElementById('download-image-button').style.backgroundColor = color;\n\t\tconst dataUrl = canvas.toDataURL();\n\t\tconst dataUrlTag = document.getElementById('dataurl');\n\t\tdataUrlTag.value = dataUrl;\n\t\tif(shouldAutoCopyDataUrl()){\n\t\t\tcopyDataURLToClipboard();\n\t\t}\n\t}\n}\nfunction downloadTinySquare(el) {\n\tconst canvas = document.getElementById('canvas');\n\tconst image = canvas.toDataURL(\"image/jpg\");\n\tconst filename = 'tinysquare-'.concat(getColor(), '-', getSize().toString(), '.png');\n\tel.download = filename;\n\tel.href = image;\n}\ndocument.addEventListener(\"DOMContentLoaded\", onLoad);\n"]}